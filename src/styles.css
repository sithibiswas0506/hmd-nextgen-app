
* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body { font-family: Inter, system-ui, Arial; margin: 0; background: #f0f2f5; }
.app-root { width: 100%; height: 100vh; margin: 0; background: white; border-radius: 0; overflow: hidden; display: flex; flex-direction: column; }
.app-header { padding: 16px 20px; font-weight: 600; background: #4267B2; color: white; }
.app-header { padding: 16px 20px; font-weight: 600; background: #4267B2; color: white; position: fixed; top: 0; left: 0; right: 0; z-index: 120 }
.app-main { flex: 1; padding: 0; display: flex; padding-top: 64px }

.chat-window { display: flex; flex-direction: column; height: 100%; border: 1px solid #e6e9ee; border-radius: 8px; overflow: hidden; }
.chat-list { flex: 1; padding: 16px; overflow-y: auto; background: #fff; }
.message { margin-bottom: 12px; max-width: 70%; padding: 10px 12px; border-radius: 16px; }
.message.self { margin-left: auto; background: #DCF8C6; }
.message.other { margin-right: auto; background: #f1f0f0; }
.chat-input { display: flex; padding: 12px; border-top: 1px solid #eee; background: #fafafa; }
.chat-input input { flex: 1; padding: 10px 12px; border-radius: 18px; border: 1px solid #ddd; margin-right: 8px; }
.chat-input button { padding: 10px 14px; border-radius: 8px; border: none; background: #4267B2; color: white; }

/* Sidebar */
.layout { display: flex; flex: 1; min-height: 0; }
.sidebar { width: 420px; border-right: 1px solid #e6e9ee; display: flex; flex-direction: column; background: #fff; color: inherit }
.sidebar .top { padding: 12px; display: flex; gap: 8px; align-items: center; }
.search { flex: 1; display:flex; }
.search input { flex:1; padding:8px 10px; border-radius: 18px; border:1px solid #ddd; background: #fff; color: inherit }
.sidebar .actions { display:flex; gap:8px }
.contacts { overflow-y:auto; padding: 8px; }
.contact { display:flex; gap:10px; align-items:center; padding:10px; border-radius:8px; cursor:pointer; justify-content:space-between }
.contact:hover { background:#f7f9fb }
.contact .meta { display:flex; flex-direction:column; flex: 1 1 auto; min-width: 0 }
.contact .name { font-weight:600 }
.contact .name.unread { font-weight:700; color: #111 }
.contact .sub { font-size:12px; color:#666 }
/* single-line preview with time aligned right */
.contact .sub { display:flex; align-items:center; gap:8px }
.contact .sub .preview { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; display: inline-block; flex: 1 1 auto; min-width: 0 }
.contact .sub .time { flex: 0 0 auto; color: #999; font-size: 12px; margin-left: 8px }
.avatar { width:44px; height:44px; border-radius:50%; object-fit:cover }

.avatar-wrap { position: relative; display: inline-block }
.status-dot { position: absolute; right: -2px; bottom: -2px; width:12px; height:12px; background:#28a745; border-radius:50%; border:2px solid #fff }

.filters-row { display:flex; gap:8px; padding: 8px 12px; border-bottom: 1px solid #f1f3f5; background: #fafafa }
.filter { padding:6px 10px; border-radius:20px; border:1px solid #eee; background: #fff; cursor:pointer; font-size:13px; color: #333 }
.filter.active { background:#4267B2; color:#fff; border-color: rgba(0,0,0,0.06) }

.contact-right { display:flex; gap:8px; align-items:center; margin-left: 12px; flex: 0 0 auto }
.badge { background:#ff6b6b; color:#fff; padding:4px 8px; border-radius:12px; font-size:12px }
.small { font-size:12px; color:#666 }
.online-dot { display:none }
.contact-menu { position: relative }
.contact-menu .dots { background: transparent; border: none; font-size:18px; cursor:pointer; padding:6px }

/* Simplified, non-intrusive menu: stacked pill buttons (no heavy card look) */
.contact-menu .menu, .menu-fixed .menu { right: 8px; min-width: 180px; padding: 8px; display:flex; flex-direction:column; gap:8px; z-index:80 }
.contact-menu .menu { position: absolute; right: 0; top: 28px; }
.menu-fixed { position: fixed; }
.menu-fixed .menu { min-width: 200px; padding: 8px; border-radius: 10px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }

/* Global button style to match the back/info button aesthetic */
button { padding: 8px 10px; border-radius: 8px; border: none; background: #efefef; color: #111; cursor: pointer; display: inline-flex; align-items: center; gap: 8px }
button:hover { background: #e6e6e6 }

.contact-menu .menu button, .menu-fixed .menu button { width: 100%; justify-content: flex-start; padding: 8px 10px; border-radius: 8px; background: #efefef }
.contact-menu .menu button:hover, .menu-fixed .menu button:hover { background: #e6e6e6 }
.contact-menu .menu .menu-icon { display:inline-block; width:20px; margin-right:8px; text-align:center }
.icon-svg { width:18px; height:18px; flex: 0 0 18px }
.dots-icon { width:18px; height:18px }
.icon-svg svg { width:100%; height:100% }
.contact-menu .menu .menu-separator { height:1px; background:#eee; margin:6px 0 }
.contact-menu .menu button.delete { color: #b33 }

/* pinned contact indicator */
.contact.pinned { background: linear-gradient(90deg, rgba(255,246,209,0.6), rgba(255,255,255,0)); }
.pin-indicator { margin-left:8px; font-size:14px; color:#f59e0b }

/* Picker modal */
.picker-overlay { position: fixed; left:0; top:0; right:0; bottom:0; background: rgba(0,0,0,0.45); display:flex; align-items:center; justify-content:center; z-index:200 }
.picker-modal { background: #fff; padding: 16px; width: 520px; max-width: 94%; border-radius: 8px; box-shadow: 0 12px 40px rgba(0,0,0,0.25); max-height: 88vh; overflow:auto }
.picker-modal h3 { margin:0 0 8px 0 }
.picker-list { max-height: 320px; overflow:auto; display:flex; flex-direction:column; gap:6px; padding:6px 0 }
.picker-item { display:flex; align-items:center; gap:8px; padding:6px; border-radius:6px; cursor:pointer }
.picker-item input { width:16px; height:16px }
.picker-item img { width:36px; height:36px; border-radius:50%; object-fit:cover }

.main { flex:1; display:flex; flex-direction:column; min-width: 0 }
.main .header { padding:12px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center }
.messages { flex:1; padding:16px; overflow:auto }

.details { width:360px; border-left:1px solid #e6e9ee; padding:12px; display:flex; flex-direction:column }
.details .profile { display:flex; gap:12px; align-items:center }
.details .profile img { width:72px; height:72px; border-radius:10px; object-fit:cover }
.details .status { font-size:13px; color:#333 }
.details .tabs { display:flex; gap:8px; margin-top:12px }
.details .tab { padding:8px 10px; border-radius:8px; background:#fafafa; cursor:pointer }
.gallery { display:grid; grid-template-columns:repeat(3,1fr); gap:6px; margin-top:12px }
.gallery img { width:100%; height:80px; object-fit:cover; border-radius:6px }
.file-list { margin-top:12px }
.file-item { display:flex; gap:8px; align-items:center; padding:6px 0 }
.file-icon { width:28px; height:28px; background:#eef; display:inline-flex; align-items:center; justify-content:center; border-radius:6px }
.links-list { margin-top:12px }
.links-list a { display:block; color:#0366d6; text-decoration:none; margin-bottom:6px }

/* Full-page details view */
.details-page { padding: 16px; display: flex; flex-direction: column; height: calc(100vh - 64px); }
.details-header { display:flex; align-items:center; gap:12px; justify-content:space-between }
.details-header .back { padding:8px 12px; border-radius:8px; border:none; background:#eee }
.details-content { margin-top:12px; overflow:auto; }

/* Confirm modal */
.confirm-overlay { position: fixed; left:0; top:0; right:0; bottom:0; background: rgba(0,0,0,0.45); display:flex; align-items:center; justify-content:center; z-index:320 }
.confirm-modal { background: #fff; padding: 18px; width: 420px; max-width: 92%; border-radius: 10px; box-shadow: 0 20px 50px rgba(0,0,0,0.25) }
.confirm-modal h3 { margin:0 0 8px 0 }
.confirm-body { color:#333; font-size:14px }
.btn { padding:8px 12px; border-radius:8px; border:none; cursor:pointer }
.btn-secondary { background:#efefef }
.btn-danger { background:#d33; color:white }

/* Empty main placeholder */
.empty-screen { display: flex; flex-direction: column; align-items: stretch; justify-content: flex-start }
.empty-screen .header { background: transparent }
.empty-screen .chat-input { display: none }

/* Mobile responsiveness */
@media (max-width: 900px) {
	.app-root { height: 100%; }
	/* On mobile: sidebar becomes an overlay drawer instead of stacked column */
	.layout { flex-direction: row; position: relative; }
	.sidebar { width: 80%; max-width: 360px; position: fixed; left: 0; top: 64px; height: calc(100vh - 64px); border-right: none; border-bottom: none; background: #fff; box-shadow: 0 8px 30px rgba(0,0,0,0.12); transform: translateX(-110%); transition: transform .22s ease; z-index: 60; }
	.sidebar.visible { transform: translateX(0); }
	.sidebar.hidden { transform: translateX(-110%); }
	/* small-screen overlay behind the drawer */
	.overlay { position: fixed; left:0; top:64px; right:0; bottom:0; background: rgba(0,0,0,0.35); z-index:50 }

	/* Make picker modal mobile friendly: full height panel */
	.picker-overlay { align-items: flex-start; padding-top: 64px }
	.picker-modal { width: 100%; height: calc(100vh - 64px); max-width: 100%; border-radius: 0; padding: 16px; overflow: auto }
	.details { display: none; }
	.mobile-toggle { display: inline-block; margin-right: 8px; padding:6px 8px; border-radius:6px; border:none; background:#efefef }
	.gallery img { height: 120px }
	.details-page { height: calc(100vh - 64px); }

	/* Mobile: make picker actions stack and buttons full width */
	@media (max-width: 900px) {
		.picker-modal .actions { display: flex; flex-direction: column; gap: 8px }
		.picker-modal .actions button { width: 100%; }
	}
}

@media (min-width: 901px) {
	.mobile-toggle { display: none }

	.back-btn { padding:6px 8px; border-radius:6px; border:none; background:#efefef; cursor:pointer }
	.info-btn { width:36px; height:36px; border-radius:50%; border:none; background:#f3f4f6; display:inline-flex; align-items:center; justify-content:center; font-weight:600; cursor:pointer }
	.info-btn[disabled] { opacity: 0.6 }
}
